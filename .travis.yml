language: python
node:
- '3.7'
install:
- pip install -r requirements.txt
sudo: required
services:
- docker
dist: trusty
addons:
  sonarcloud:
    organization: lucasdlg5-github
    token:
      secure: 6fd1c5449b5a0c11a121eaf42761bb56af0b118b
branch:
  only:
  - master

script:
- sonar-scanner

before_install:
  - sudo apt-get install fabric3
  - openssl enc -aes-256-cbc -d -in deploy_key.enc -out deploy_key -k $PASS
  - fab docker_deployer